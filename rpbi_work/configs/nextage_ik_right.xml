<?xml version="1.0" ?>
<IKSolverDemoConfig>

  <SnoptIKUnconstrainedSolver Name="MySolver" MaxIterations="20" />

  <UnconstrainedEndPoseProblem Name="MyProblem">

    <PlanningScene>
      <Scene>
        <Debug>1</Debug>
        <JointGroup>whole_body</JointGroup>
        <URDF>{nextage_smart_factory}/urdf/nextagea_dual_pick.urdf</URDF>
        <SRDF>{nextagea_moveit_config}/config/NextageAOpen.srdf</SRDF>
        <SetRobotDescriptionRosParams>1</SetRobotDescriptionRosParams>
        <Links>
            <Link Name="TargetLeft" Parent="base_link"/>
            <Link Name="TargetRight" Parent="base_link"/>
            <Link Name="HEAD_JOINT1_Link_alt" Parent="HEAD_JOINT1_Link" Transform="0 0 0 0 1.57 0"/>
        </Links>
      </Scene>
    </PlanningScene>

    <Maps>
      <EffFrame Name="PositionLeft">
        <EndEffector>
            <Frame Link="LEND_EFFECTOR_finger" Base="TargetLeft"/>
        </EndEffector>
      </EffFrame>
      <EffPosition Name="PositionRight">
        <EndEffector>
            <Frame Link="REND_EFFECTOR_finger" Base="TargetRight"/>
        </EndEffector>
      </EffPosition>
      <JointVelocityBackwardDifference Name="JointAcc">
        <dt>0.02</dt>
        <!-- <StartState>0 0 0 0 -0.28 -0.33 0 0 -1.57 0 -0.28 -0.33 0 0 1.57 </StartState> -->
    <StartState>0 0 0 0 -0.43 -0.31 0 0.75 -1.57 0 -0.43 -0.31 0 0.75 1.57 </StartState>
      </JointVelocityBackwardDifference>

      <!-- <JointVelocityBackwardDifference Name="JointVelSmooth"> -->
      <!--   <dt>0.01</dt> -->
      <!--   <!-\- <StartState>0 0 0 0 -0.28 -0.33 0 0 -1.57 0 -0.28 -0.33 0 0 1.57 </StartState> -\-> -->
      <!--   <StartState>0 0 0 0 -0.43 -0.31 0 0.75 -1.57 0 -0.43 -0.31 0 0.75 1.57 </StartState> -->
      <!-- </JointVelocityBackwardDifference> -->
      
      <JointPose Name="Pose" />
      <JointLimit Name="Limits" SafePercentage="0.05"/>
      <LookAt Name="LookAt">
        <EndEffector>
          <!-- EndEffector #1 => Target to look at, in relative frame of EffPoint -->
          <Frame Link="TargetRight" Base="HEAD_JOINT1_Link_alt"/> <!-- Needs to make sure this is correct -->
        </EndEffector>
      </LookAt>
      <JointPose Name="JointPose">
        <JointRef>0 0 0 0 -0.43 -0.31 0 0.75 -1.57 0 -0.43 -0.31 0 1.57</JointRef>
        <JointMap>0 1 2 3 4 5 6 7 8 9 10 11 12 14</JointMap>
      </JointPose>

      <JointPose Name="Wrist">
        <!-- <JointRef>-0.31</JointRef> -->
        <JointRef>1.57</JointRef>
        <JointMap>14</JointMap>
      </JointPose>


      <JointVelocityBackwardDifference Name="JointDamp">
        <dt>0.01</dt>
    <StartState>0 0 0 0 -0.43 -0.31 0 0.75 -1.57 0 -0.43 -0.31 0 0.75 1.57 </StartState>
        <!-- <StartState>0 0 0 0 -0.28 -0.33 0 0 -1.57 0 -0.28 -0.33 0 0 1.57 </StartState> -->
        <!-- <StartState>0 0 0 0 -0.43 -0.31 0 0.75 -1.57 0 -0.43 -0.31 0 0.75 1.57 </StartState> -->
      </JointVelocityBackwardDifference>
    </Maps>

    <Cost>
      <!-- <Task Task="PositionLeft" Rho="0."/> -->
      <!-- <Task Task="PositionRight" Rho="1e5"/> -->
      <!-- <Task Task="Pose" Rho="0."/> -->
      <!-- <Task Task="JointAcc" Rho="1e0"/> -->
      <!-- <Task Task="Limits" Rho="1e7"/> -->
      <!-- <Task Task="LookAt" Rho="0.5e2"/> -->
      <!-- <Task Task="JointPose" Rho="1e-2"/> -->
      <!-- <!-\- <Task Task="JointDamp" Rho="5e0"/> -\-> -->
      <!-- <Task Task="Wrist" Rho="1e2"/> -->

      <Task Task="JointDamp" Rho="1.0"/>
      <Task Task="PositionLeft" Rho="0."/>
      <Task Task="PositionRight" Rho="1e5"/>
      <Task Task="Pose" Rho="0."/>
      <Task Task="JointAcc" Rho="1e2"/>
      <Task Task="Limits" Rho="1e7"/>
      <Task Task="LookAt" Rho="0.5e2"/>
      <!-- <Task Task="Wrist" Rho="1e2"/> -->

    </Cost>

    <StartState>0 0 0 0 -0.43 -0.31 0 0.75 -1.57 0 -0.43 -0.31 0 0.75 1.57 </StartState>
    <!-- <StartState>0 0 0 0 -0.28 -0.33 0 0 -1.57 0 -0.28 -0.33 0 0 1.57 </StartState> -->
    <!-- <NominalState>0 0 0 0 -0.28 -0.33 0 0 -1.57 0 -0.28 -0.33 0 0 1.57 </NominalState> -->
    <W> 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1</W>

  </UnconstrainedEndPoseProblem>

</IKSolverDemoConfig>
