<launch>

  <!-- ROS-Pybullet interface node simulator -->
  <node pkg="ros_pybullet_interface" name="ros_pybullet_interface_node" type="ros_pybullet_interface_node.py" output="screen">

    <!-- Config file for Pybullet -->
    <param name="pybullet_config" value="{rpbi_work}/configs/pybullet_nextage_pushing.yaml" type="str"/>

    <!-- Node frequency -->
    <param name="ros_node_freq" value="100" type="int"/>

    <!-- Simulated robot -->
    <rosparam param="robot_config_file_names">
      [
      "{rpbi_work}/configs/nextage.yaml",
      <!-- "{rpbi_work}/configs/nextage_pushing.yaml", -->
      ]
    </rosparam>

    <remap from="/rpbi/nextage_visual/joint_state/target" to="/nextagea/joint_states"/>
    
    <!-- Visual robot -->
    <rosparam param="visual_robot_config_file_names">
      [
      "{rpbi_work}/configs/nextage_visual.yaml",
      ]
    </rosparam>

    <rosparam param="dynamic_object_config_file_names">
      [
      <!-- "{rpbi_work}/configs/pushing_box.yaml", -->
      ]
    </rosparam>

    <rosparam param="collision_object_config_file_names">
      [
      "{rpbi_work}/configs/floor.yaml",
      "{rpbi_work}/configs/table.yaml",
      ]
    </rosparam>

    <rosparam param="visual_object_config_file_names">
      [
      "{rpbi_work}/configs/visual_goal_left.yaml",
      "{rpbi_work}/configs/visual_goal_right.yaml",
      "{rpbi_work}/configs/pushing_box_visual.yaml",      
      "{rpbi_work}/configs/pushing_box_visual_nom.yaml",      
      "{rpbi_work}/configs/pushing_box_visual_goal.yaml",
      "{rpbi_work}/configs/oats_visual.yaml",
      "{rpbi_work}/configs/jaffa_visual.yaml",
      "{rpbi_work}/configs/threshold_filter_sphere.yaml",
      ]
    </rosparam>

  </node>


  <!-- Static tf frames -->

  <node pkg="tf2_ros" type="static_transform_publisher" name="simulated_robot_base_tf_broadcaster"
  	args="0. 0. -0.85 0 0 0 sim/nextage_base rpbi/world"/>

  <node pkg="tf2_ros" type="static_transform_publisher" name="floor_tf_broadcaster"
	args="0 0 0 0 0 0 rpbi/world floor"/>

  <node pkg="tf2_ros" type="static_transform_publisher" name="table_top_tf_broadcaster"
	args="0.825 0 0.73 0 0 0 rpbi/world table_top"/>

  <node pkg="tf2_ros" type="static_transform_publisher" name="table_tf_broadcaster"
	args="0 0 -0.1 0 0 0 table_top table"/> <!-- DO NOT EDIT THIS -->

  <node pkg="tf2_ros" type="static_transform_publisher" name="connect_vicon_nextage_base_and_nextage_base_tf_broadcaster"
	args="-0.375 -0.00525 -0.01 3.141592653589793 0 0 vicon/nextage_vicon_base/nextage_vicon_base sim/nextage_base"/>

<!--
  <node pkg="tf2_ros" type="static_transform_publisher" name="sliding_box_center_tf_broadcaster"
	args="0. 0. -0.131 0 0 0 vicon/sliding_box_nextage/sliding_box_nextage pushing_box_visual"/>
-->

  <!-- <node pkg="tf2_ros" type="static_transform_publisher" name="sliding_box_center_tf_broadcaster" -->
	<!-- args="-0.012 0. -0.131 0 0 0 vicon/sliding_box_nextage/sliding_box_nextage pushing_box_visual"/> -->

  <node pkg="tf2_ros" type="static_transform_publisher" name="sliding_box_center_tf_broadcaster"
	args="-0.01 0. -0.131 -0.06981317007977318 0 0 vicon/sliding_box_nextage/sliding_box_nextage pushing_box_visual"/>


  <node pkg="tf2_ros" type="static_transform_publisher" name="cylinder_obstacle_tf_broadcaster"
	      args="0. 0. 2. 0 0 0 rpbi/world rpbi/cylinder_obs"/>

  <node pkg="tf2_ros" type="static_transform_publisher" name="oats_center_tf_broadcaster"
	      args="0 0 -0.125 0 0 0 vicon/easy_oats1/easy_oats1 oats_visual"/>

  <node pkg="tf2_ros" type="static_transform_publisher" name="jaffa_center_tf_broadcaster"
	      args="0.05 0 -0.135 0 0.15707963267948966 0 vicon/jaffa_cakes1/jaffa_cakes1 jaffa_visual"/>

  <!-- 1deg: 0.017453292519943295 -->
  <!-- 3deg: 0.05235987755982989 -->
  <!-- 4deg: 0.06981317007977318 -->
  <!-- 5deg: 0.0872665 -->
  <!-- 6deg: 0.10471975511965978 -->
  <!-- 7deg: 0.12217304763960307 -->
  <!-- 8deg: 0.13962634015954636 -->
  <!-- 9deg: 0.15707963267948966 -->

</launch>
